import { motion } from "motion/react";
import { useEffect, useState } from "react";

const waveSet1 = [
  "M719 600L712.2 587.5C705.3 575 691.7 550 672.3 525C653 500 628 475 632.3 450C636.7 425 670.3 400 686.7 375C703 350 702 325 695.2 300C688.3 275 675.7 250 672.3 225C669 200 675 175 666.8 150C658.7 125 636.3 100 625.3 75C614.3 50 614.7 25 614.8 12.5L615 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M757 600L752.2 587.5C747.3 575 737.7 550 726.5 525C715.3 500 702.7 475 695.7 450C688.7 425 687.3 400 694.3 375C701.3 350 716.7 325 723.7 300C730.7 275 729.3 250 720.2 225C711 200 694 175 683 150C672 125 667 100 667.7 75C668.3 50 674.7 25 677.8 12.5L681 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M722 600L730.2 587.5C738.3 575 754.7 550 766.8 525C779 500 787 475 785.7 450C784.3 425 773.7 400 771.5 375C769.3 350 775.7 325 780.3 300C785 275 788 250 782.7 225C777.3 200 763.7 175 763.2 150C762.7 125 775.3 100 770.5 75C765.7 50 743.3 25 732.2 12.5L721 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M813 600L814.8 587.5C816.7 575 820.3 550 821.8 525C823.3 500 822.7 475 823.2 450C823.7 425 825.3 400 823.7 375C822 350 817 325 807 300C797 275 782 250 773.8 225C765.7 200 764.3 175 768.3 150C772.3 125 781.7 100 788.8 75C796 50 801 25 803.5 12.5L806 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M841 600L841 587.5C841 575 841 550 836.5 525C832 500 823 475 822.7 450C822.3 425 830.7 400 838.8 375C847 350 855 325 858 300C861 275 859 250 854.2 225C849.3 200 841.7 175 841.3 150C841 125 848 100 847 75C846 50 837 25 832.5 12.5L828 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
];

const waveSet2 = [
  "M687 600L672.7 587.5C658.3 575 629.7 550 632.7 525C635.7 500 670.3 475 688 450C705.7 425 706.3 400 703.3 375C700.3 350 693.7 325 687.2 300C680.7 275 674.3 250 668.8 225C663.3 200 658.7 175 664 150C669.3 125 684.7 100 695.3 75C706 50 712 25 715 12.5L718 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M699 600L706 587.5C713 575 727 550 730.5 525C734 500 727 475 719.2 450C711.3 425 702.7 400 708.7 375C714.7 350 735.3 325 733 300C730.7 275 705.3 250 704.2 225C703 200 726 175 737.2 150C748.3 125 747.7 100 749.2 75C750.7 50 754.3 25 756.2 12.5L758 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M782 600L773 587.5C764 575 746 550 734.5 525C723 500 718 475 719 450C720 425 727 400 734.2 375C741.3 350 748.7 325 755.3 300C762 275 768 250 771.7 225C775.3 200 776.7 175 765.8 150C755 125 732 100 721 75C710 50 711 25 711.5 12.5L712 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M765 600L772.2 587.5C779.3 575 793.7 550 804.3 525C815 500 822 475 818.2 450C814.3 425 799.7 400 799.7 375C799.7 350 814.3 325 812.7 300C811 275 793 250 790.3 225C787.7 200 800.3 175 802.7 150C805 125 797 100 790.7 75C784.3 50 779.7 25 777.3 12.5L775 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M824 600L824.2 587.5C824.3 575 824.7 550 828.8 525C833 500 841 475 847.3 450C853.7 425 858.3 400 859.3 375C860.3 350 857.7 325 853 300C848.3 275 841.7 250 843.3 225C845 200 855 175 853.8 150C852.7 125 840.3 100 836.3 75C832.3 50 836.7 25 838.8 12.5L841 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
];

const waveSet3 = [
  "M620 600L622.3 587.5C624.7 575 629.3 550 640.3 525C651.3 500 668.7 475 678.3 450C688 425 690 400 681.3 375C672.7 350 653.3 325 639.8 300C626.3 275 618.7 250 615 225C611.3 200 611.7 175 612.7 150C613.7 125 615.3 100 631.8 75C648.3 50 679.7 25 695.3 12.5L711 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M704 600L706.3 587.5C708.7 575 713.3 550 712.3 525C711.3 500 704.7 475 701.8 450C699 425 700 400 702.8 375C705.7 350 710.3 325 709.2 300C708 275 701 250 691.3 225C681.7 200 669.3 175 664.5 150C659.7 125 662.3 100 677.8 75C693.3 50 721.7 25 735.8 12.5L750 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M759 600L763.7 587.5C768.3 575 777.7 550 771.8 525C766 500 745 475 731.7 450C718.3 425 712.7 400 710 375C707.3 350 707.7 325 717 300C726.3 275 744.7 250 747 225C749.3 200 735.7 175 737.7 150C739.7 125 757.3 100 758.7 75C760 50 745 25 737.5 12.5L730 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M778 600L776.2 587.5C774.3 575 770.7 550 775.7 525C780.7 500 794.3 475 799 450C803.7 425 799.3 400 801.2 375C803 350 811 325 808.7 300C806.3 275 793.7 250 796 225C798.3 200 815.7 175 818.7 150C821.7 125 810.3 100 808.3 75C806.3 50 813.7 25 817.3 12.5L821 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
  "M820 600L820.8 587.5C821.7 575 823.3 550 823.2 525C823 500 821 475 819 450C817 425 815 400 814.8 375C814.7 350 816.3 325 821.7 300C827 275 836 250 844.3 225C852.7 200 860.3 175 861 150C861.7 125 855.3 100 847.8 75C840.3 50 831.7 25 827.3 12.5L823 0L900 0L900 12.5C900 25 900 50 900 75C900 100 900 125 900 150C900 175 900 200 900 225C900 250 900 275 900 300C900 325 900 350 900 375C900 400 900 425 900 450C900 475 900 500 900 525C900 550 900 575 900 587.5L900 600Z",
];

const allWaveSets = [waveSet1, waveSet2, waveSet3];

function getColor(i: number): string {
  const colors = ["#507dbc", "#6599c7", "#86b3cf", "#aeccd8", "#dae3e5"];
  return colors[i % colors.length];
}

function interpolatePath(path1: string, path2: string, progress: number): string {
  return progress < 0.5 ? path1 : path2;
}

export default function WavyDecor() {
  const [scrollProgress, setScrollProgress] = useState(0);

  useEffect(() => {
    const handleScroll = () => {
      const scrolled = window.scrollY;
      const viewportHeight = window.innerHeight;
      const progress = scrolled / viewportHeight;
      setScrollProgress(progress);
    };

    window.addEventListener('scroll', handleScroll);
    handleScroll();

    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const totalSets = allWaveSets.length;
  const setProgress = (scrollProgress % totalSets);
  const currentSetIndex = Math.floor(setProgress);
  const nextSetIndex = (currentSetIndex + 1) % totalSets;
  const interpolationProgress = setProgress - currentSetIndex;

  const currentWaves = allWaveSets[currentSetIndex];
  const nextWaves = allWaveSets[nextSetIndex];

  return (
    <svg viewBox="0 0 900 600" height="100vh" className="fixed top-0 right-0 pointer-events-none z-200 lg:block hidden">
      {currentWaves.map((d, i) => {
        const nextD = nextWaves[i];
        const interpolatedPath = interpolatePath(d, nextD, interpolationProgress);
        
        return (
          <motion.path
            key={i}
            d={interpolatedPath}
            fill={getColor(i)}
            animate={{ d: interpolatedPath }}
            transition={{
              duration: 0.5,
              ease: "easeOut",
            }}
          />
        );
      })}
    </svg>
  );
}